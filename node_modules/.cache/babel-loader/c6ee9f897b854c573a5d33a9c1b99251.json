{"ast":null,"code":"(function (global, factory) {\n  if (typeof module === \"object\" && typeof module.exports === \"object\") factory(exports, require(\"react\"), require(\"prop-types\"), require(\"katex\"));else if (typeof define === \"function\" && define.amd) define([\"exports\", \"react\", \"prop-types\", \"katex\"], factory);else if (global = typeof globalThis !== \"undefined\" ? globalThis : global || self) factory(global.index = {}, global.react, global.propTypes, global.katex);\n})(this, function (exports, _react, _propTypes, _katex) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  function _export(target, all) {\n    for (var name in all) Object.defineProperty(target, name, {\n      enumerable: true,\n      get: all[name]\n    });\n  }\n  _export(exports, {\n    BlockMath: () => BlockMath,\n    InlineMath: () => InlineMath\n  });\n  _react = /*#__PURE__*/_interopRequireWildcard(_react);\n  _propTypes = /*#__PURE__*/_interopRequireDefault(_propTypes);\n  _katex = /*#__PURE__*/_interopRequireDefault(_katex);\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n  function _getRequireWildcardCache(nodeInterop) {\n    if (typeof WeakMap !== \"function\") return null;\n    var cacheBabelInterop = new WeakMap();\n    var cacheNodeInterop = new WeakMap();\n    return (_getRequireWildcardCache = function (nodeInterop) {\n      return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n    })(nodeInterop);\n  }\n  function _interopRequireWildcard(obj, nodeInterop) {\n    if (!nodeInterop && obj && obj.__esModule) {\n      return obj;\n    }\n    if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n      return {\n        default: obj\n      };\n    }\n    var cache = _getRequireWildcardCache(nodeInterop);\n    if (cache && cache.has(obj)) {\n      return cache.get(obj);\n    }\n    var newObj = {};\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n    for (var key in obj) {\n      if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n        var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n        if (desc && (desc.get || desc.set)) {\n          Object.defineProperty(newObj, key, desc);\n        } else {\n          newObj[key] = obj[key];\n        }\n      }\n    }\n    newObj.default = obj;\n    if (cache) {\n      cache.set(obj, newObj);\n    }\n    return newObj;\n  }\n  /**\n  * @typedef {import(\"react\").ReactNode} ReactNode\n  *\n  *\n  * @callback ErrorRenderer\n  * @param {Error} error\n  * @returns {ReactNode}\n  *\n  *\n  * @typedef {object} MathComponentPropsWithMath\n  * @property {string} math\n  * @property {ReactNode=} children\n  * @property {string=} errorColor\n  * @property {ErrorRenderer=} renderError\n  *\n  *\n  * @typedef {object} MathComponentPropsWithChildren\n  * @property {string=} math\n  * @property {ReactNode} children\n  * @property {string=} errorColor\n  * @property {ErrorRenderer=} renderError\n  *\n  * @typedef {MathComponentPropsWithMath | MathComponentPropsWithChildren} MathComponentProps\n  */\n  const createMathComponent = (Component, _ref) => {\n    let {\n      displayMode\n    } = _ref;\n    /**\n    *\n    * @param {MathComponentProps} props\n    * @returns {ReactNode}\n    */\n    const MathComponent = _ref2 => {\n      let {\n        children,\n        errorColor,\n        math,\n        renderError\n      } = _ref2;\n      const formula = math !== null && math !== void 0 ? math : children;\n      const {\n        html,\n        error\n      } = (0, _react.useMemo)(() => {\n        try {\n          const html = _katex.default.renderToString(formula, {\n            displayMode,\n            errorColor,\n            throwOnError: !!renderError\n          });\n          return {\n            html,\n            error: undefined\n          };\n        } catch (error) {\n          if (error instanceof _katex.default.ParseError || error instanceof TypeError) {\n            return {\n              error\n            };\n          }\n          throw error;\n        }\n      }, [formula, errorColor, renderError]);\n      if (error) {\n        return renderError ? renderError(error) : /*#__PURE__*/_react.default.createElement(Component, {\n          html: \"\".concat(error.message)\n        });\n      }\n      return /*#__PURE__*/_react.default.createElement(Component, {\n        html: html\n      });\n    };\n    MathComponent.propTypes = {\n      children: _propTypes.default.string,\n      errorColor: _propTypes.default.string,\n      math: _propTypes.default.string,\n      renderError: _propTypes.default.func\n    };\n    return MathComponent;\n  };\n  const InternalPathComponentPropTypes = {\n    html: _propTypes.default.string.isRequired\n  };\n  const InternalBlockMath = _ref3 => {\n    let {\n      html\n    } = _ref3;\n    return /*#__PURE__*/_react.default.createElement(\"div\", {\n      \"data-testid\": \"react-katex\",\n      dangerouslySetInnerHTML: {\n        __html: html\n      }\n    });\n  };\n  InternalBlockMath.propTypes = InternalPathComponentPropTypes;\n  const InternalInlineMath = _ref4 => {\n    let {\n      html\n    } = _ref4;\n    return /*#__PURE__*/_react.default.createElement(\"span\", {\n      \"data-testid\": \"react-katex\",\n      dangerouslySetInnerHTML: {\n        __html: html\n      }\n    });\n  };\n  InternalInlineMath.propTypes = InternalPathComponentPropTypes;\n  const BlockMath = createMathComponent(InternalBlockMath, {\n    displayMode: true\n  });\n  const InlineMath = createMathComponent(InternalInlineMath, {\n    displayMode: false\n  });\n});\n\n//# sourceMappingURL=react-katex.js.map","map":{"version":3,"sources":["../src/index.jsx"],"names":["createMathComponent","Component","displayMode","MathComponent","children","errorColor","math","renderError","formula","html","error","useMemo","KaTeX","renderToString","throwOnError","undefined","ParseError","TypeError","message","propTypes","PropTypes","string","func","InternalPathComponentPropTypes","isRequired","InternalBlockMath","div","data-testid","dangerouslySetInnerHTML","__html","InternalInlineMath","span","BlockMath","InlineMath"],"mappings":"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","sourcesContent":["import React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport KaTeX from 'katex';\n\n/**\n * @typedef {import(\"react\").ReactNode} ReactNode\n *\n *\n * @callback ErrorRenderer\n * @param {Error} error\n * @returns {ReactNode}\n *\n *\n * @typedef {object} MathComponentPropsWithMath\n * @property {string} math\n * @property {ReactNode=} children\n * @property {string=} errorColor\n * @property {ErrorRenderer=} renderError\n *\n *\n * @typedef {object} MathComponentPropsWithChildren\n * @property {string=} math\n * @property {ReactNode} children\n * @property {string=} errorColor\n * @property {ErrorRenderer=} renderError\n *\n * @typedef {MathComponentPropsWithMath | MathComponentPropsWithChildren} MathComponentProps\n */\n\nconst createMathComponent = (Component, { displayMode }) => {\n  /**\n   *\n   * @param {MathComponentProps} props\n   * @returns {ReactNode}\n   */\n  const MathComponent = ({ children, errorColor, math, renderError }) => {\n    const formula = math ?? children;\n\n    const { html, error } = useMemo(() => {\n      try {\n        const html = KaTeX.renderToString(formula, {\n          displayMode,\n          errorColor,\n          throwOnError: !!renderError,\n        });\n\n        return { html, error: undefined };\n      } catch (error) {\n        if (error instanceof KaTeX.ParseError || error instanceof TypeError) {\n          return { error };\n        }\n\n        throw error;\n      }\n    }, [formula, errorColor, renderError]);\n\n    if (error) {\n      return renderError ? renderError(error) : <Component html={`${error.message}`} />;\n    }\n\n    return <Component html={html} />;\n  };\n\n  MathComponent.propTypes = {\n    children: PropTypes.string,\n    errorColor: PropTypes.string,\n    math: PropTypes.string,\n    renderError: PropTypes.func,\n  };\n\n  return MathComponent;\n};\n\nconst InternalPathComponentPropTypes = {\n  html: PropTypes.string.isRequired,\n};\n\nconst InternalBlockMath = ({ html }) => {\n  return <div data-testid=\"react-katex\" dangerouslySetInnerHTML={{ __html: html }} />;\n};\n\nInternalBlockMath.propTypes = InternalPathComponentPropTypes;\n\nconst InternalInlineMath = ({ html }) => {\n  return <span data-testid=\"react-katex\" dangerouslySetInnerHTML={{ __html: html }} />;\n};\n\nInternalInlineMath.propTypes = InternalPathComponentPropTypes;\n\nexport const BlockMath = createMathComponent(InternalBlockMath, { displayMode: true });\nexport const InlineMath = createMathComponent(InternalInlineMath, { displayMode: false });\n"]},"metadata":{},"sourceType":"script"}