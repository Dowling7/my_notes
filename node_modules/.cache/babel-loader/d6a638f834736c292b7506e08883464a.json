{"ast":null,"code":"'use strict';\n\nvar core = require('@react-pdf-viewer/core');\nvar React = require('react');\nvar attachment = require('@react-pdf-viewer/attachment');\nvar bookmark = require('@react-pdf-viewer/bookmark');\nvar thumbnail = require('@react-pdf-viewer/thumbnail');\nvar toolbar = require('@react-pdf-viewer/toolbar');\nfunction _interopNamespaceDefault(e) {\n  var n = Object.create(null);\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n  n.default = e;\n  return Object.freeze(n);\n}\nvar React__namespace = /*#__PURE__*/_interopNamespaceDefault(React);\nvar BookmarkIcon = function () {\n  return React__namespace.createElement(core.Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M11.5,1.5h11c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h3\\n            M11.5,10.5c0,0.55-0.3,0.661-0.659,0.248L8,7.5l-2.844,3.246c-0.363,0.414-0.659,0.3-0.659-0.247v-9c0-0.552,0.448-1,1-1h5\\n            c0.552,0,1,0.448,1,1L11.5,10.5z\\n            M14.5,6.499h6\\n            M14.5,10.499h6\\n            M3.5,14.499h17\\n            M3.5,18.499h16.497\"\n  }));\n};\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar FileIcon = function () {\n  return React__namespace.createElement(core.Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M7.618,15.345l8.666-8.666c0.78-0.812,2.071-0.838,2.883-0.058s0.838,2.071,0.058,2.883\\n            c-0.019,0.02-0.038,0.039-0.058,0.058L7.461,21.305c-1.593,1.593-4.175,1.592-5.767,0s-1.592-4.175,0-5.767c0,0,0,0,0,0\\n            L13.928,3.305c2.189-2.19,5.739-2.19,7.929-0.001s2.19,5.739,0,7.929l0,0L13.192,19.9\"\n  }));\n};\nvar ThumbnailIcon = function () {\n  return React__namespace.createElement(core.Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\\n            M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\\n            M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z\\n            M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z\"\n  }));\n};\nvar TOOLTIP_OFFSET_LTR = {\n  left: 8,\n  top: 0\n};\nvar TOOLTIP_OFFSET_RTL = {\n  left: -8,\n  top: 0\n};\nvar Sidebar = function (_a) {\n  var attachmentTabContent = _a.attachmentTabContent,\n    bookmarkTabContent = _a.bookmarkTabContent,\n    store = _a.store,\n    thumbnailTabContent = _a.thumbnailTabContent,\n    tabs = _a.tabs;\n  var containerRef = React__namespace.useRef();\n  var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n  var _b = React__namespace.useState(store.get('isCurrentTabOpened') || false),\n    opened = _b[0],\n    setOpened = _b[1];\n  var _c = React__namespace.useState(Math.max(store.get('currentTab') || 0, 0)),\n    currentTab = _c[0],\n    setCurrentTab = _c[1];\n  var direction = React__namespace.useContext(core.ThemeContext).direction;\n  var isRtl = direction === core.TextDirection.RightToLeft;\n  var resizeConstrain = function (size) {\n    return size.firstHalfPercentage >= 20 && size.firstHalfPercentage <= 80;\n  };\n  var defaultTabs = [{\n    content: thumbnailTabContent,\n    icon: React__namespace.createElement(ThumbnailIcon, null),\n    title: l10n && l10n.defaultLayout ? l10n.defaultLayout.thumbnail : 'Thumbnail'\n  }, {\n    content: bookmarkTabContent,\n    icon: React__namespace.createElement(BookmarkIcon, null),\n    title: l10n && l10n.defaultLayout ? l10n.defaultLayout.bookmark : 'Bookmark'\n  }, {\n    content: attachmentTabContent,\n    icon: React__namespace.createElement(FileIcon, null),\n    title: l10n && l10n.defaultLayout ? l10n.defaultLayout.attachment : 'Attachment'\n  }];\n  var listTabs = tabs ? tabs(defaultTabs) : defaultTabs;\n  var toggleTab = function (index) {\n    if (currentTab === index) {\n      store.update('isCurrentTabOpened', !store.get('isCurrentTabOpened'));\n      var container = containerRef.current;\n      if (container) {\n        var width = container.style.width;\n        if (width) {\n          container.style.removeProperty('width');\n        }\n      }\n    } else {\n      store.update('currentTab', index);\n    }\n  };\n  var switchToTab = function (index) {\n    if (index >= 0 && index <= listTabs.length - 1) {\n      store.update('isCurrentTabOpened', true);\n      setCurrentTab(index);\n    }\n  };\n  var handleCurrentTabOpened = function (opened) {\n    setOpened(opened);\n  };\n  React__namespace.useEffect(function () {\n    store.subscribe('currentTab', switchToTab);\n    store.subscribe('isCurrentTabOpened', handleCurrentTabOpened);\n    return function () {\n      store.unsubscribe('currentTab', switchToTab);\n      store.unsubscribe('isCurrentTabOpened', handleCurrentTabOpened);\n    };\n  }, []);\n  if (listTabs.length === 0) {\n    return React__namespace.createElement(React__namespace.Fragment, null);\n  }\n  return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    \"data-testid\": \"default-layout__sidebar\",\n    className: core.classNames({\n      'rpv-default-layout__sidebar': true,\n      'rpv-default-layout__sidebar--opened': opened,\n      'rpv-default-layout__sidebar--ltr': !isRtl,\n      'rpv-default-layout__sidebar--rtl': isRtl\n    }),\n    ref: containerRef\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-default-layout__sidebar-tabs\"\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-default-layout__sidebar-headers\",\n    role: \"tablist\",\n    \"aria-orientation\": \"vertical\"\n  }, listTabs.map(function (tab, index) {\n    return React__namespace.createElement(\"div\", {\n      \"aria-controls\": \"rpv-default-layout__sidebar-content\",\n      \"aria-selected\": currentTab === index,\n      key: index,\n      className: \"rpv-default-layout__sidebar-header\",\n      id: \"rpv-default-layout__sidebar-tab-\".concat(index),\n      role: \"tab\"\n    }, React__namespace.createElement(core.Tooltip, {\n      ariaControlsSuffix: \"default-layout-sidebar-tab-\".concat(index),\n      position: isRtl ? core.Position.LeftCenter : core.Position.RightCenter,\n      target: React__namespace.createElement(core.MinimalButton, {\n        ariaLabel: tab.title,\n        isSelected: currentTab === index,\n        onClick: function () {\n          return toggleTab(index);\n        }\n      }, tab.icon),\n      content: function () {\n        return tab.title;\n      },\n      offset: isRtl ? TOOLTIP_OFFSET_RTL : TOOLTIP_OFFSET_LTR\n    }));\n  })), React__namespace.createElement(\"div\", {\n    \"aria-labelledby\": \"rpv-default-layout__sidebar-tab-\".concat(currentTab),\n    id: \"rpv-default-layout__sidebar-content\",\n    className: core.classNames({\n      'rpv-default-layout__sidebar-content': true,\n      'rpv-default-layout__sidebar-content--opened': opened,\n      'rpv-default-layout__sidebar-content--ltr': !isRtl,\n      'rpv-default-layout__sidebar-content--rtl': isRtl\n    }),\n    role: \"tabpanel\",\n    tabIndex: -1\n  }, listTabs[currentTab].content))), opened && React__namespace.createElement(core.Splitter, {\n    constrain: resizeConstrain\n  }));\n};\nvar defaultLayoutPlugin = function (props) {\n  var store = React__namespace.useMemo(function () {\n    return core.createStore({\n      isCurrentTabOpened: false,\n      currentTab: 0\n    });\n  }, []);\n  var attachmentPluginInstance = attachment.attachmentPlugin();\n  var bookmarkPluginInstance = bookmark.bookmarkPlugin();\n  var thumbnailPluginInstance = thumbnail.thumbnailPlugin(props ? props.thumbnailPlugin : {});\n  var toolbarPluginInstance = toolbar.toolbarPlugin(props ? props.toolbarPlugin : {});\n  var Attachments = attachmentPluginInstance.Attachments;\n  var Bookmarks = bookmarkPluginInstance.Bookmarks;\n  var Thumbnails = thumbnailPluginInstance.Thumbnails;\n  var Toolbar = toolbarPluginInstance.Toolbar;\n  var sidebarTabs = props ? props.sidebarTabs : function (defaultTabs) {\n    return defaultTabs;\n  };\n  var plugins = [attachmentPluginInstance, bookmarkPluginInstance, thumbnailPluginInstance, toolbarPluginInstance];\n  return {\n    attachmentPluginInstance: attachmentPluginInstance,\n    bookmarkPluginInstance: bookmarkPluginInstance,\n    thumbnailPluginInstance: thumbnailPluginInstance,\n    toolbarPluginInstance: toolbarPluginInstance,\n    activateTab: function (index) {\n      store.update('currentTab', index);\n    },\n    toggleTab: function (index) {\n      var currentTab = store.get('currentTab');\n      store.update('isCurrentTabOpened', !store.get('isCurrentTabOpened'));\n      if (currentTab !== index) {\n        store.update('currentTab', index);\n      }\n    },\n    install: function (pluginFunctions) {\n      plugins.forEach(function (plugin) {\n        if (plugin.install) {\n          plugin.install(pluginFunctions);\n        }\n      });\n    },\n    renderPageLayer: function (renderProps) {\n      return React__namespace.createElement(React__namespace.Fragment, null, plugins.map(function (plugin, idx) {\n        return plugin.renderPageLayer ? React__namespace.createElement(React__namespace.Fragment, {\n          key: idx\n        }, plugin.renderPageLayer(renderProps)) : React__namespace.createElement(React__namespace.Fragment, {\n          key: idx\n        }, React__namespace.createElement(React__namespace.Fragment, null));\n      }));\n    },\n    renderViewer: function (renderProps) {\n      var slot = renderProps.slot;\n      plugins.forEach(function (plugin) {\n        if (plugin.renderViewer) {\n          slot = plugin.renderViewer(__assign(__assign({}, renderProps), {\n            slot: slot\n          }));\n        }\n      });\n      var mergeSubSlot = slot.subSlot && slot.subSlot.attrs ? {\n        className: slot.subSlot.attrs.className,\n        'data-testid': slot.subSlot.attrs['data-testid'],\n        ref: slot.subSlot.attrs.ref,\n        style: slot.subSlot.attrs.style\n      } : {};\n      slot.children = React__namespace.createElement(\"div\", {\n        className: \"rpv-default-layout__container\"\n      }, React__namespace.createElement(\"div\", {\n        \"data-testid\": \"default-layout__main\",\n        className: core.classNames({\n          'rpv-default-layout__main': true,\n          'rpv-default-layout__main--rtl': renderProps.themeContext.direction === core.TextDirection.RightToLeft\n        })\n      }, React__namespace.createElement(Sidebar, {\n        attachmentTabContent: React__namespace.createElement(Attachments, null),\n        bookmarkTabContent: React__namespace.createElement(Bookmarks, null),\n        store: store,\n        thumbnailTabContent: React__namespace.createElement(Thumbnails, null),\n        tabs: sidebarTabs\n      }), React__namespace.createElement(\"div\", {\n        className: \"rpv-default-layout__body\",\n        \"data-testid\": \"default-layout__body\"\n      }, React__namespace.createElement(\"div\", {\n        className: \"rpv-default-layout__toolbar\"\n      }, props && props.renderToolbar ? props.renderToolbar(Toolbar) : React__namespace.createElement(Toolbar, null)), React__namespace.createElement(\"div\", __assign({}, mergeSubSlot), slot.subSlot.children))), slot.children);\n      slot.subSlot.attrs = {};\n      slot.subSlot.children = React__namespace.createElement(React__namespace.Fragment, null);\n      return slot;\n    },\n    uninstall: function (pluginFunctions) {\n      plugins.forEach(function (plugin) {\n        if (plugin.uninstall) {\n          plugin.uninstall(pluginFunctions);\n        }\n      });\n    },\n    onDocumentLoad: function (documentLoadProps) {\n      plugins.forEach(function (plugin) {\n        if (plugin.onDocumentLoad) {\n          plugin.onDocumentLoad(documentLoadProps);\n        }\n      });\n      if (props && props.setInitialTab) {\n        props.setInitialTab(documentLoadProps.doc).then(function (initialTab) {\n          store.update('currentTab', initialTab);\n          store.update('isCurrentTabOpened', true);\n        });\n      }\n    },\n    onAnnotationLayerRender: function (props) {\n      plugins.forEach(function (plugin) {\n        if (plugin.onAnnotationLayerRender) {\n          plugin.onAnnotationLayerRender(props);\n        }\n      });\n    },\n    onTextLayerRender: function (props) {\n      plugins.forEach(function (plugin) {\n        if (plugin.onTextLayerRender) {\n          plugin.onTextLayerRender(props);\n        }\n      });\n    },\n    onViewerStateChange: function (viewerState) {\n      var newState = viewerState;\n      plugins.forEach(function (plugin) {\n        if (plugin.onViewerStateChange) {\n          newState = plugin.onViewerStateChange(newState);\n        }\n      });\n      return newState;\n    }\n  };\n};\nvar setInitialTabFromPageMode = function (doc) {\n  return new Promise(function (resolve, _) {\n    doc.getPageMode().then(function (pageMode) {\n      if (!pageMode) {\n        resolve(-1);\n      } else {\n        switch (pageMode) {\n          case core.PageMode.Attachments:\n            resolve(2);\n            break;\n          case core.PageMode.Bookmarks:\n            resolve(1);\n            break;\n          case core.PageMode.Thumbnails:\n            resolve(0);\n            break;\n          default:\n            resolve(-1);\n            break;\n        }\n      }\n    });\n  });\n};\nexports.BookmarkIcon = BookmarkIcon;\nexports.FileIcon = FileIcon;\nexports.ThumbnailIcon = ThumbnailIcon;\nexports.defaultLayoutPlugin = defaultLayoutPlugin;\nexports.setInitialTabFromPageMode = setInitialTabFromPageMode;","map":null,"metadata":{},"sourceType":"script"}